{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/rica_/OneDrive/\\xC1rea de Trabalho/Pensamentos/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/rica_/OneDrive/\\xC1rea de Trabalho/Pensamentos/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/rica_/OneDrive/\\xC1rea de Trabalho/Pensamentos/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from\"./Table.module.css\";import{Link}from\"react-router-dom\";import{useState}from\"react\";import Modal from\"./Modal\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Table=function Table(_ref){var id=_ref.id,title=_ref.title,to=_ref.to,value=_ref.value,onError=_ref.onError;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalVisible=_useState2[0],setmodalVisible=_useState2[1];var handleModalConfirmFn=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,responseData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"https://api-thoughts.onrender.com/thoughts/delete/\".concat(id),{method:\"DELETE\"});case 3:response=_context.sent;_context.next=6;return response.json();case 6:responseData=_context.sent;if(response.ok){_context.next=9;break;}throw new Error(responseData.message);case 9:window.location.reload();_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);onError(_context.t0.message);case 15:_context.prev=15;setmodalVisible(false);return _context.finish(15);case 18:case\"end\":return _context.stop();}}},_callee,null,[[0,12,15,18]]);}));return function handleModalConfirmFn(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:styles.table_container,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.table,children:[/*#__PURE__*/_jsxs(\"p\",{className:styles.idTable,children:[\"ID: \",id]}),/*#__PURE__*/_jsx(\"h3\",{className:styles.titleTable,name:\"title\",children:title}),/*#__PURE__*/_jsx(\"button\",{className:styles.deleteTable,children:/*#__PURE__*/_jsx(Link,{className:styles.editTable,to:to,children:\"Edit\"})}),/*#__PURE__*/_jsx(\"button\",{className:styles.deleteTable,onClick:function onClick(){return setmodalVisible(true);},children:value})]}),modalVisible&&/*#__PURE__*/_jsx(Modal,{id:id,message:'Are you sure you want to delete?',onClose:function onClose(){return setmodalVisible(false);},value:\"Delete\",onSubmit:handleModalConfirmFn})]});};export default Table;","map":{"version":3,"names":["styles","Link","useState","Modal","Table","id","title","to","value","onError","modalVisible","setmodalVisible","handleModalConfirmFn","fetch","method","response","json","responseData","ok","Error","message","window","location","reload","table_container","table","idTable","titleTable","deleteTable","editTable"],"sources":["C:/Users/rica_/OneDrive/Ãrea de Trabalho/Pensamentos/frontend/src/components/Table.js"],"sourcesContent":["import styles from \"./Table.module.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useState } from \"react\";\r\nimport Modal from \"./Modal\";\r\n\r\nconst Table = ({ id, title, to, value, onError }) => {\r\n  const [modalVisible, setmodalVisible] = useState(false);\r\n\r\n  const handleModalConfirmFn = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        `https://api-thoughts.onrender.com/thoughts/delete/${id}`,\r\n        {\r\n          method: \"DELETE\",\r\n        }\r\n      );\r\n      const responseData = await response.json();\r\n      if (!response.ok) {\r\n        throw new Error(responseData.message);\r\n      }\r\n      window.location.reload()\r\n    } catch (err) {\r\n      onError(err.message);\r\n    } finally {\r\n      setmodalVisible(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.table_container}>\r\n      <div className={styles.table}>\r\n        <p className={styles.idTable}>ID: {id}</p>\r\n        <h3 className={styles.titleTable} name=\"title\">\r\n          {title}\r\n        </h3>\r\n        <button className={styles.deleteTable}>\r\n          <Link className={styles.editTable} to={to}>\r\n            Edit\r\n          </Link>\r\n        </button>\r\n        <button\r\n          className={styles.deleteTable}\r\n          onClick={() => setmodalVisible(true)}\r\n        >\r\n          {value}\r\n        </button>\r\n      </div>\r\n      {modalVisible && (\r\n        <Modal\r\n          id={id}\r\n          message={'Are you sure you want to delete?'}\r\n          onClose={() => setmodalVisible(false)}\r\n          value=\"Delete\"\r\n          onSubmit={handleModalConfirmFn}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n"],"mappings":"kdAAA,MAAOA,OAAM,KAAM,oBAAoB,CACvC,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,QAAQ,KAAQ,OAAO,CAChC,MAAOC,MAAK,KAAM,SAAS,CAAC,wFAE5B,GAAMC,MAAK,CAAG,QAARA,MAAK,MAA0C,IAApCC,GAAE,MAAFA,EAAE,CAAEC,KAAK,MAALA,KAAK,CAAEC,EAAE,MAAFA,EAAE,CAAEC,KAAK,MAALA,KAAK,CAAEC,OAAO,MAAPA,OAAO,CAC5C,cAAwCP,QAAQ,CAAC,KAAK,CAAC,wCAAhDQ,YAAY,eAAEC,eAAe,eAEpC,GAAMC,qBAAoB,6FAAG,qMAEFC,MAAK,6DAC2BR,EAAE,EACvD,CACES,MAAM,CAAE,QACV,CAAC,CACF,QALKC,QAAQ,qCAMaA,SAAQ,CAACC,IAAI,EAAE,QAApCC,YAAY,kBACbF,QAAQ,CAACG,EAAE,8BACR,IAAIC,MAAK,CAACF,YAAY,CAACG,OAAO,CAAC,QAEvCC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE,kFAExBd,OAAO,CAAC,YAAIW,OAAO,CAAC,CAAC,yBAErBT,eAAe,CAAC,KAAK,CAAC,CAAC,sGAE1B,kBAlBKC,qBAAoB,2CAkBzB,CAED,mBACE,aAAK,SAAS,CAAEZ,MAAM,CAACwB,eAAgB,wBACrC,aAAK,SAAS,CAAExB,MAAM,CAACyB,KAAM,wBAC3B,WAAG,SAAS,CAAEzB,MAAM,CAAC0B,OAAQ,kBAAMrB,EAAE,GAAK,cAC1C,WAAI,SAAS,CAAEL,MAAM,CAAC2B,UAAW,CAAC,IAAI,CAAC,OAAO,UAC3CrB,KAAK,EACH,cACL,eAAQ,SAAS,CAAEN,MAAM,CAAC4B,WAAY,uBACpC,KAAC,IAAI,EAAC,SAAS,CAAE5B,MAAM,CAAC6B,SAAU,CAAC,EAAE,CAAEtB,EAAG,kBAEnC,EACA,cACT,eACE,SAAS,CAAEP,MAAM,CAAC4B,WAAY,CAC9B,OAAO,CAAE,yBAAMjB,gBAAe,CAAC,IAAI,CAAC,EAAC,UAEpCH,KAAK,EACC,GACL,CACLE,YAAY,eACX,KAAC,KAAK,EACJ,EAAE,CAAEL,EAAG,CACP,OAAO,CAAE,kCAAmC,CAC5C,OAAO,CAAE,yBAAMM,gBAAe,CAAC,KAAK,CAAC,EAAC,CACtC,KAAK,CAAC,QAAQ,CACd,QAAQ,CAAEC,oBAAqB,EAElC,GACG,CAEV,CAAC,CAED,cAAeR,MAAK"},"metadata":{},"sourceType":"module"}