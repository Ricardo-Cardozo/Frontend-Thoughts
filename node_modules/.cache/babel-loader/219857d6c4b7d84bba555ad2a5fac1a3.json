{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/rica_/OneDrive/\\xC1rea de Trabalho/Pensamentos/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/rica_/OneDrive/\\xC1rea de Trabalho/Pensamentos/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/rica_/OneDrive/\\xC1rea de Trabalho/Pensamentos/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Table from\"../components/Table\";import{useState,useEffect,useCallback}from\"react\";import ErrorMessage from\"../components/ErrorMessage\";import Input from\"../components/Input\";import styles from\"./Dashboard.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),thoughts=_useState2[0],setThoughts=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),filterThoughts=_useState8[0],setFIlterThoughts=_useState8[1];useEffect(function(){function getThoughts(){return _getThoughts.apply(this,arguments);}function _getThoughts(){_getThoughts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,responseData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"https://api-thoughts.onrender.com/thoughts/\");case 3:response=_context.sent;_context.next=6;return response.json();case 6:responseData=_context.sent;if(response.ok){_context.next=9;break;}throw new Error(responseData.message);case 9:setThoughts(responseData);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);setError(_context.t0.message);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return _getThoughts.apply(this,arguments);}getThoughts();},[]);var filterCallback=useCallback(function(){setFIlterThoughts(Array.isArray(thoughts.thoughts)&&thoughts.thoughts.filter(function(thought){return thought.title.toLowerCase().includes(search.toLocaleLowerCase());}));},[search,thoughts.thoughts]);console.log();useEffect(function(){filterCallback();},[filterCallback]);//eslint-disable-line\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.titleContainer,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Dashboard\"}),error&&/*#__PURE__*/_jsx(ErrorMessage,{children:error}),!error?/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"search\",id:\"search\",placeholder:\"Search any thought\",onChange:function onChange(e){return setSearch(e.target.value);}}):\"\"]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[!error?Array.isArray(filterThoughts)&&filterThoughts.length>0&&filterThoughts.map(function(thought){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Table,{id:thought._id,title:thought.title,to:\"/edit/\".concat(thought._id),type:\"submit\",value:\"Delete\",onError:setError},thought._id)},thought._id);}):\"\",!error?Array.isArray(filterThoughts)&&filterThoughts.length===0&&/*#__PURE__*/_jsx(\"h1\",{className:styles.notFound,children:\"Thought not found!\"}):\"\"]})]});};export default Dashboard;","map":{"version":3,"names":["Table","useState","useEffect","useCallback","ErrorMessage","Input","styles","Dashboard","thoughts","setThoughts","error","setError","search","setSearch","filterThoughts","setFIlterThoughts","getThoughts","fetch","response","json","responseData","ok","Error","message","filterCallback","Array","isArray","filter","thought","title","toLowerCase","includes","toLocaleLowerCase","console","log","titleContainer","e","target","value","container","length","map","_id","notFound"],"sources":["C:/Users/rica_/OneDrive/Ãrea de Trabalho/Pensamentos/frontend/src/pages/Dashboard.js"],"sourcesContent":["import Table from \"../components/Table\";\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport ErrorMessage from \"../components/ErrorMessage\";\r\nimport Input from \"../components/Input\";\r\nimport styles from \"./Dashboard.module.css\";\r\n\r\n\r\nconst Dashboard = () => {\r\n  const [thoughts, setThoughts] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n  const [search, setSearch] = useState(\"\");\r\n  const [filterThoughts, setFIlterThoughts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    async function getThoughts() {\r\n      try {\r\n        const response = await fetch(\"https://api-thoughts.onrender.com/thoughts/\");\r\n        const responseData = await response.json();\r\n\r\n        if (!response.ok) {\r\n          throw new Error(responseData.message);\r\n        }\r\n        setThoughts(responseData);\r\n      } catch (err) {\r\n        setError(err.message);\r\n      }\r\n    }\r\n    getThoughts();\r\n  }, []);\r\n\r\n  const filterCallback = useCallback(() => {\r\n    setFIlterThoughts(\r\n      Array.isArray(thoughts.thoughts) &&\r\n        thoughts.thoughts.filter((thought) => {\r\n          return thought.title\r\n            .toLowerCase()\r\n            .includes(search.toLocaleLowerCase());\r\n        })\r\n    );\r\n  }, [search, thoughts.thoughts]);\r\n\r\n  console.log();\r\n\r\n  useEffect(() => {\r\n    filterCallback();\r\n  }, [filterCallback]); //eslint-disable-line\r\n\r\n  return (\r\n    <>\r\n      <div className={styles.titleContainer}>\r\n        <h1>Dashboard</h1>\r\n\r\n        {error && <ErrorMessage>{error}</ErrorMessage>}\r\n        {!error ? (\r\n          <Input\r\n            type=\"text\"\r\n            name=\"search\"\r\n            id=\"search\"\r\n            placeholder=\"Search any thought\"\r\n            onChange={(e) => setSearch(e.target.value)}\r\n          />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n      <div className={styles.container}>\r\n        {!error\r\n          ? Array.isArray(filterThoughts) &&\r\n            filterThoughts.length > 0 &&\r\n            filterThoughts.map((thought) => (\r\n              <div key={thought._id}>\r\n                <Table\r\n                  key={thought._id}\r\n                  id={thought._id}\r\n                  title={thought.title}\r\n                  to={`/edit/${thought._id}`}\r\n                  type=\"submit\"\r\n                  value=\"Delete\"\r\n                  onError={setError}\r\n                />\r\n              </div>\r\n            ))\r\n          : \"\"\r\n        }\r\n        {!error\r\n          ? Array.isArray(filterThoughts) &&\r\n            filterThoughts.length === 0 && (\r\n              <h1 className={styles.notFound}>Thought not found!</h1>\r\n            )\r\n          : \"\"\r\n        }\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}